# 반복 일정 기능 요구사항

> AI Agent 자동화 워크플로우 입력 문서

## 기능 1: 반복 유형 선택

- 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
- 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년
  - **31일에 매월을 선택한다면** → 매월 마지막이 아닌, 31일에만 생성하세요.
  - **윤년 29일에 매년을 선택한다면** → 29일에만 생성하세요!
- 반복일정은 일정 겹침을 고려하지 않는다.

## 기능 2: 반복 일정 표시

- 캘린더 뷰에서 반복 일정을 아이콘을 넣어 구분하여 표시한다.

## 기능 3: 반복 종료

- 반복 종료 조건을 지정할 수 있다.
- 옵션: 특정 날짜까지
  - 예제 특성상, 2025-12-31까지 최대 일자를 만들어 주세요.

## 기능 4: 반복 일정 수정

### 4-1. 단일 수정

- '해당 일정만 수정하시겠어요?' 라는 텍스트에서 '예'라고 누르는 경우
- 반복일정을 수정하면 단일 일정으로 변경됩니다.
- 반복일정 아이콘도 사라집니다.

### 4-2. 전체 수정

- '해당 일정만 수정하시겠어요?' 라는 텍스트에서 '아니오'라고 누르는 경우
- 이 경우 반복 일정은 유지됩니다.
- 반복일정 아이콘도 유지됩니다.

## 기능 5: 반복 일정 삭제

### 5-1. 단일 삭제

- '해당 일정만 삭제하시겠어요?' 라는 텍스트에서 '예'라고 누르는 경우
- 해당 일정만 삭제합니다.

### 5-2. 전체 삭제

- '해당 일정만 삭제하시겠어요?' 라는 텍스트에서 '아니오'라고 누르는 경우
- 반복 일정의 모든 일정을 삭제할 수 있다.

---

## 기술 스택

- **Frontend**: React 19, TypeScript, Material-UI (MUI)
- **Backend**: Express.js, Node.js 18+
- **Testing**: Vitest ^3.2.4, @testing-library/react
- **Package Manager**: pnpm

## 프로젝트 구조

```
src/
├── App.tsx                    # UI 컴포넌트 (반복 설정 UI 추가)
├── types.ts                   # 타입 정의 (RepeatType, RepeatInfo, Event)
├── hooks/
│   ├── useEventForm.ts       # 반복 설정 상태 관리
│   └── useEventOperations.ts # 반복 일정 CRUD
├── utils/
│   └── repeatUtils.ts        # 반복 일정 생성 로직 (신규)
└── __tests__/
    ├── unit/
    │   └── repeatUtils.spec.ts
    ├── hooks/
    │   ├── useEventForm.spec.ts
    │   └── useEventOperations.spec.ts
    └── integration/
        └── repeatEvent.spec.tsx

server.js                      # API 엔드포인트 수정
```

## 주요 엣지 케이스

1. **31일 매월 반복**
   - 2월은 건너뛰기 (28/29일만 존재)
   - 30일 달도 건너뛰기 (4, 6, 9, 11월)
   - 31일 있는 달만 생성 (1, 3, 5, 7, 8, 10, 12월)

2. **윤년 2월 29일 매년 반복**
   - 윤년에만 생성 (2024, 2028, 2032...)
   - 평년은 건너뛰기

3. **반복 종료 날짜**
   - 최대: 2025-12-31
   - 종료 날짜 이후는 생성하지 않음

## 품질 기준

- Code Coverage: ≥ 80%
- Mutation Score: ≥ 70%
- 모든 테스트 통과
- AAA 패턴 준수
- Mock 사용 금지 (순수 함수 테스트)

